<!--<!DOCTYPE html>-->
<!--<html lang="en">-->

<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Login Page</title>-->
<!--    <link rel="stylesheet" href="../CSS/globals.css">-->
<!--    <link rel="stylesheet" href="../CSS/styles.css">-->
<!--</head>-->
<!--<body>-->
<!--<div class="professor">-->
<!--    <div class="professor-screen">-->
<!--        <div class="overlap-group">-->
<!--            &lt;!&ndash; Video 1 &ndash;&gt;-->
<!--            <div class="testscreen">-->
<!--                <video id="video1" class="video1" autoplay playsinline></video>-->
<!--            </div>-->
<!--            &lt;!&ndash; Video 2 &ndash;&gt;-->
<!--            <div class="testscreen">-->
<!--                <video id="video2" class="video2" autoplay playsinline></video>-->
<!--            </div>-->

<!--            <div class="text-wrapper">18010871 김일번</div>-->
<!--            <div class="div">19010376 김이번</div>-->

<!--            <div class="text-wrapper-4">교수 김이박</div>-->
<!--            <div class="AI-exam-PM">AI Exam&nbsp;&nbsp;PM 2시</div>-->
<!--        </div>-->
<!--        <div class="overlap">-->
<!--            <img class="search-icon" src="img/search-icon.svg"/>-->
<!--            <div class="text-wrapper-5">Search..</div>-->
<!--        </div>-->
<!--        <div class="text-wrapper-6">XX University</div>-->
<!--        <div class="text-wrapper-7">Support</div>-->
<!--        <div class="text-wrapper-8">Notification</div>-->
<!--        <div class="overlap-2">-->
<!--            <div class="text-wrapper-9">Dashboard</div>-->
<!--            <img class="dashboard-icon" src="img/dashboard-icon.svg"/>-->
<!--        </div>-->
<!--        <img class="support-icon" src="img/support-icon.svg"/>-->
<!--        <img class="notification-icon" src="img/notification-icon.svg"/>-->
<!--        <div class="log-out-group">-->
<!--            <div class="text-wrapper-10">Log Out</div>-->
<!--            <img class="icon-of-log-out" src="img/icon-of-log-out.svg"/>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<script src="../JS/screen.js"></script>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Login Page</title>-->
<!--    <link rel="stylesheet" href="../CSS/globals.css">-->
<!--    <link rel="stylesheet" href="../CSS/styles.css">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>-->
<!--    <script src="../JS/gaze.js"></script>-->
<!--</head>-->
<!--<body>-->
<!--<div class="professor">-->
<!--    <div class="professor-screen">-->
<!--        <div class="overlap-group">-->
<!--            &lt;!&ndash; Video 1 &ndash;&gt;-->
<!--            <div class="testscreen">-->
<!--                <video id="webcam" class="video1" autoplay playsinline></video>-->
<!--            </div>-->

<!--            <div class="text-wrapper">18010871 김일번</div>-->
<!--            <div class="div">19010376 김이번</div>-->

<!--            <div class="text-wrapper-4">교수 김이박</div>-->
<!--            <div class="AI-exam-PM">AI Exam&nbsp;&nbsp;PM 2시</div>-->
<!--        </div>-->
<!--        <div class="overlap">-->
<!--            <img class="search-icon" src="img/search-icon.svg"/>-->
<!--            <div class="text-wrapper-5">Search..</div>-->
<!--        </div>-->
<!--        <div class="text-wrapper-6">XX University</div>-->
<!--        <div class="text-wrapper-7">Support</div>-->
<!--        <div class="text-wrapper-8">Notification</div>-->
<!--        <div class="overlap-2">-->
<!--            <div class="text-wrapper-9">Dashboard</div>-->
<!--            <img class="dashboard-icon" src="img/dashboard-icon.svg"/>-->
<!--        </div>-->
<!--        <img class="support-icon" src="img/support-icon.svg"/>-->
<!--        <img class="notification-icon" src="img/notification-icon.svg"/>-->
<!--        <div class="log-out-group">-->
<!--            <div class="text-wrapper-10">Log Out</div>-->
<!--            <img class="icon-of-log-out" src="img/icon-of-log-out.svg"/>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<div id="warning-message" style="display: none; position: fixed; bottom: 10px; right: 10px; background-color: red; color: white; padding: 10px;">경고 1회</div>-->
<!--<button id="increase-warning" style="position: fixed; bottom: 50px; right: 10px;">경고 증가</button>-->
<!--<script src="../JS/screen.js"></script>-->
<!--<script>-->
<!--    let warningCount = 0;-->

<!--    document.getElementById('increase-warning').addEventListener('click', () => {-->
<!--        warningCount++;-->
<!--        showWarningMessage(warningCount);-->

<!--        if (warningCount >= 3) {-->
<!--            deactivateScreen();-->
<!--        }-->
<!--    });-->

<!--    async function main() {-->
<!--        await setupWebcam();-->
<!--        await loadModel();-->
<!--        setInterval(detectGaze, 1000); // 1초마다 시선 감지-->
<!--    }-->

<!--    async function detectGaze() {-->
<!--        const predictions = await model.predict(tf.browser.fromPixels(video));-->
<!--        const gazeOutside = predictions.some(prediction => prediction < 0.5);-->

<!--        if (gazeOutside) {-->
<!--            warningCount++;-->
<!--            showWarningMessage(warningCount);-->

<!--            if (warningCount >= 3) {-->
<!--                deactivateScreen();-->
<!--            }-->
<!--        }-->
<!--    }-->

<!--    function showWarningMessage(count) {-->
<!--        const warningMessage = document.getElementById('warning-message');-->
<!--        warningMessage.textContent = `경고 ${count}회`;-->
<!--        warningMessage.style.display = 'block';-->
<!--        setTimeout(() => {-->
<!--            warningMessage.style.display = 'none';-->
<!--        }, 3000);-->
<!--    }-->

<!--    function deactivateScreen() {-->
<!--        document.body.innerHTML = '<h1>화면이 비활성화되었습니다</h1>';-->
<!--    }-->

<!--    main();-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="../CSS/globals.css">
    <link rel="stylesheet" href="../CSS/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
    <script src="../JS/gaze.js"></script>
    <style>
        .warning-border-2 {
            border: 5px solid orange;
        }
        .warning-border-3 {
            border: 5px solid red;
        }
        .disabled {
            pointer-events: none;
            opacity: 0.5;
        }
    </style>
</head>
<body>
<div class="professor">
    <div class="professor-screen">
        <div class="overlap-group">
            <!-- Video 1 -->
            <div class="testscreen">
                <video id="webcam" class="video1" autoplay playsinline></video>
            </div>

            <div class="text-wrapper">18010871 김일번</div>
            <div class="div">19010376 김이번</div>

            <div class="text-wrapper-4">교수 김이박</div>
            <div class="AI-exam-PM">AI Exam&nbsp;&nbsp;PM 2시</div>
        </div>
        <div class="overlap">
            <img class="search-icon" src="img/search-icon.svg"/>
            <div class="text-wrapper-5">Search..</div>
        </div>
        <div class="text-wrapper-6">XX University</div>
        <div class="text-wrapper-7">Support</div>
        <div class="text-wrapper-8">Notification</div>
        <div class="overlap-2">
            <div class="text-wrapper-9">Dashboard</div>
            <img class="dashboard-icon" src="img/dashboard-icon.svg"/>
        </div>
        <img class="support-icon" src="img/support-icon.svg"/>
        <img class="notification-icon" src="img/notification-icon.svg"/>
        <div class="log-out-group">
            <div class="text-wrapper-10">Log Out</div>
            <img class="icon-of-log-out" src="img/icon-of-log-out.svg"/>
        </div>
    </div>
</div>
<div id="warning-message" style="display: none; position: fixed; bottom: 10px; right: 10px; background-color: red; color: white; padding: 10px;">경고 1회</div>
<button id="increase-warning" style="position: fixed; bottom: 50px; right: 10px;">경고 증가</button>
<script src="../JS/screen.js"></script>
<script>
    let warningCount = 0;

    document.getElementById('increase-warning').addEventListener('click', () => {
        warningCount++;
        handleWarning(warningCount);
    });

    async function main() {
        await setupWebcam();
        await loadModel();
        setInterval(detectGaze, 1000); // 1초마다 시선 감지
    }

    async function detectGaze() {
        const predictions = await model.predict(tf.browser.fromPixels(video));
        const gazeOutside = predictions.some(prediction => prediction < 0.5);

        if (gazeOutside) {
            warningCount++;
            handleWarning(warningCount);
        }
    }

    function handleWarning(count) {
        const warningMessage = document.getElementById('warning-message');
        const webcam = document.getElementById('webcam');

        warningMessage.textContent = `경고 ${count}회`;
        warningMessage.style.display = 'block';
        setTimeout(() => {
            warningMessage.style.display = 'none';
        }, 3000);

        if (count === 2) {
            webcam.classList.add('warning-border-2');
        } else if (count >= 3) {
            webcam.classList.remove('warning-border-2');
            webcam.classList.add('warning-border-3');
            document.body.classList.add('disabled');
        }
    }

    main();
</script>
</body>
</html>